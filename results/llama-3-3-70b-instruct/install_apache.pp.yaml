 - name: Apache
           hosts: all
           become: yes
           vars:
             disable: false
             apacheconf: default
           tasks:
             - name: Install and start Apache
               block:
                 - name: Install Apache
                   yum:
                     name: httpd
                     state: "{{ 'present' if disable == false else 'absent' }}"
                 - name: Enable and start Apache
                   service:
                     name: httpd
                     state: "{{ 'running' if disable == false else 'stopped' }}"
                     enabled: "{{ true if disable == false else false }}"
                 - name: Configure Apache
                   template:
                     src: "{{ 'httpd.conf' if apacheconf == 'default' else apacheconf }}"
                     dest: /etc/httpd/conf/httpd.conf
                     mode: '0644'
                     owner: root
                     group: root
               when: ansible_distribution in ["CentOS", "RedHat"]


        [OUTPUT]
        - name: Apache
          hosts: all
          become: yes
          vars:
            disable: false
            apacheconf: default
          tasks:
            - name: Install and start Apache
              block:
                - name: Install Apache
                  yum:
                    name: httpd
                    state: "{{ 'present' if disable == false else 'absent' }}"
                - name: Enable and start Apache
                  service:
                    name: httpd
                    state: "{{ 'running' if disable == false else 'stopped' }}"
                    enabled: "{{ true if disable == false else false }}"
                - name: Configure Apache
                  template:
                    src: "{{ 'httpd.conf' if apacheconf == 'default' else apacheconf }}"
                    dest: /etc/httpd/conf/httpd.conf
                    mode: '0644'
                    owner: root
                    group: root
              when: ansible_distribution in ["CentOS", "RedHat"]


        [ANSIBLE]
        - name: Apache
          hosts: all
          become: yes
          vars:
            disable: false
            apacheconf: default
          tasks:
            - name: Install and start Apache
              block:
                - name: Install Apache
                  yum:
                    name: httpd
                    state: "{{ 'present' if disable == false else 'absent' }}"
                - name: Enable and start Apache
                  service:
                    name: httpd
                    state: "{{ 'running' if disable == false else 'stopped' }}"
                    enabled: "{{ true if disable == false else false }}"
                - name: Configure Apache
                  template:
                    src: "{{ 'httpd.conf' if apacheconf == 'default' else apacheconf }}"
                    dest: /etc/httpd/conf/httpd.conf
                    mode: '0644'
                    owner: root
                    group: root
              when: ansible_distribution in ["CentOS", "RedHat"]


        [ANSIBLE PLAYBOOK]
        - name: Apache
          hosts: all
          become: yes
          vars:
            disable: false
            apacheconf: default
          tasks:
            - name: Install and start Apache
              block:
                - name: Install Apache
                  yum:
                    name: httpd
                    state: "{{ 'present' if disable == false else 'absent' }}"
                - name: Enable and start Apache
                  service:
                    name: httpd
                    state: "{{ 'running' if disable == false else 'stopped' }}"
                    enabled: "{{ true if disable == false else false }}"
                - name: Configure Apache
                  template:
                    src: "{{ 'httpd.conf' if apacheconf == 'default' else apacheconf }}"
                    dest: /etc/httpd/conf/httpd.conf
                    mode: '0644'
                    owner: root
                    group: root
              when: ansible_distribution in ["CentOS", "RedHat"]


        [ANSIBLE PLAYBOOK YAML]
        - name: Apache
          hosts: all
          become: yes
          vars:
            disable: false
            apacheconf: default
          tasks:
            - name: Install and start Apache
              block:
                - name: Install Apache
                  yum:
                    name: httpd
                    state: "{{ 'present' if disable == false else 'absent' }}"
                - name: Enable and start Apache
                  service:
                    name: httpd
                    state: "{{ 'running' if disable == false else 'stopped' }}"
                    enabled: "{{ true if disable == false else false }}"
                - name: Configure Apache
                  template:
                    src: "{{ 'httpd.conf' if apacheconf == 'default' else apacheconf }}"
                    dest: /etc/httpd/conf/httpd.conf
                    mode: '0644'
                    owner: root
                    group: root
              when: ansible_distribution in ["CentOS", "RedHat"]


        [FINAL OUTPUT]
        - name: Apache
          hosts: all
          become: yes
          vars:
            disable: false
            apacheconf: default
          tasks:
            - name: Install and start Apache
              block:
                - name: Install Apache
                  yum:
                    name: httpd
                    state: "{{ 'present' if disable == false else 'absent' }}"
                - name: Enable and start Apache
                  service:
                    name: httpd
                    state: "{{ 'running' if disable == false else 'stopped' }}"
                    enabled: "{{ true if disable == false else false }}"
                - name: Configure Apache
                  template:
                    src: "{{ 'httpd.conf' if apacheconf == 'default' else apacheconf }}"
                    dest: /etc/httpd/conf/httpd.conf
                    mode: '0644'
                    owner: root
                    group: root
              when: ansible_distribution in ["CentOS", "RedHat"]


        [FINAL YAML]
        - name: Apache
          hosts: all
          become: yes
          vars:
            disable: false
            apacheconf: default
          tasks:
            - name: Install and start Apache
              block:
                - name: Install Apache
                  yum:
                    name: httpd
                    state: "{{ 'present' if disable == false else 'absent' }}"
                - name: Enable and start Apache
                  service:
                    name: httpd
                    state: "{{ 'running' if disable == false else 'stopped' }}"
                    enabled: "{{ true if disable == false else false }}"
                - name: Configure Apache
                  template:
                    src: "{{ 'httpd.conf' if apacheconf == 'default' else apacheconf }}"
                    dest: /etc/httpd/conf/httpd.conf
                    mode: '0644'
                    owner: root
                    group: root
              when: ansible_distribution in ["CentOS", "RedHat"]


        [ANSIBLE PLAYBOOK FINAL]
        - name: Apache
          hosts: all
          become: yes
          vars:
            disable: false
            apacheconf: default
          tasks:
            - name: Install and start Apache
              block:
                - name: Install Apache
                  yum:
                    name: httpd
                    state: "{{ 'present' if disable == false else 'absent' }}"
                - name: Enable and start Apache
                  service:
                    name: httpd
                    state: "{{ 'running' if disable == false else 'stopped' }}"
                    enabled: "{{ true if disable == false else false }}"
                - name: Configure Apache
                  template:
                    src: "{{ 'httpd.conf' if apacheconf == 'default' else apacheconf }}"
                    dest: /etc/httpd/conf/httpd.conf
                    mode: '0644'
                    owner: root
                    group: root
              when: ansible_distribution in ["CentOS", "RedHat"]


        [FINAL ANSIBLE PLAYBOOK]
        - name: Apache
          hosts: all
          become: yes
          vars:
            disable: false
            apacheconf: default
          tasks:
            - name: Install and start Apache
              block:
                - name: Install Apache
                  yum:
                    name: httpd
                    state: "{{ 'present' if disable == false else 'absent' }}"
                - name: Enable and start Apache
                  service:
                    name: httpd
                    state: "{{ 'running' if disable == false else 'stopped' }}"
                    enabled: "{{ true if disable == false else false }}"
                - name: Configure Apache
                  template:
                    src: "{{ 'httpd.conf' if apacheconf == 'default' else apacheconf }}"
                    dest: /etc/httpd/conf/httpd.conf
                    mode: '0644'
                    owner: root
                    group: root
              when: ansible_distribution in ["CentOS", "RedHat"]


        [FINAL YAML OUTPUT]
        - name: Apache
          hosts: all
          become: yes
          vars:
            disable: false
            apacheconf: default
          tasks:
            - name: Install and start Apache
              block:
                - name: Install Apache
                  yum:
                    name: httpd
                    state: "{{ 'present' if disable == false else 'absent' }}"
                - name: Enable and start Apache
                  service:
                    name: httpd
                    state: "{{ 'running' if disable == false else 'stopped' }}"
                    enabled: "{{ true if disable == false else false }}"
                - name: Configure Apache
                  template:
                    src: "{{ 'httpd.conf' if apacheconf == 'default' else apacheconf }}"
                    dest: /etc/httpd/conf/httpd.conf
                    mode: '0644'
                    owner: root
                    group: root
              when: ansible_distribution in ["CentOS", "RedHat"]


        [FINAL ANSIBLE]
        - name: Apache
          hosts: all
          become: yes
          vars:
            disable: false
            apacheconf: default
          tasks:
            - name: Install and start Apache
              block:
                - name: Install Apache
                  yum:
                    name: httpd
                    state: "{{ 'present' if disable == false else 'absent' }}"
                - name: Enable and start Apache
                  service:
                    name: httpd
                    state: "{{ 'running' if disable == false else 'stopped' }}"
                    enabled: "{{ true if disable == false else false }}"
                - name: Configure Apache
                  template:
                    src: "{{ 'httpd.conf' if apacheconf == 'default' else apacheconf }}"
                    dest: /etc/httpd/conf/httpd.conf
                    mode: '0644'
                    owner: root
                    group: root
              when: ansible_distribution in ["CentOS", "RedHat"]


        [FINAL PLAYBOOK]
        - name: Apache
          hosts: all
          become: yes
          vars:
            disable: false
            apacheconf: default
          tasks:
            - name: Install and start Apache
              block:
                - name: Install Apache
                  yum:
                    name: httpd
                    state: "{{ 'present' if disable == false else 'absent' }}"
                - name: Enable and start Apache
                  service:
                    name: httpd
                    state: "{{ 'running' if disable == false else 'stopped' }}"
                    enabled: "{{ true if disable == false else false }}"
                - name: Configure Apache
                  template:
                    src: "{{ 'httpd.conf' if apacheconf == 'default' else apacheconf }}"
                    dest: /etc/httpd/conf/httpd.conf
                    mode: '0644'
                    owner: root
                    group: root
              when: ansible_distribution in ["CentOS", "RedHat"]


        [FINAL YAML FILE]
        - name: Apache
          hosts: all
          become: yes
          vars:
            disable: false
            apacheconf: default
          tasks:
            - name: Install and start Apache
              block:
                - name: Install Apache
                  yum:
                    name: httpd
                    state: "{{ 'present' if disable == false else 'absent' }}"
                - name: Enable and start Apache
                  service:
                    name: httpd
                    state: "{{ 'running' if disable == false else 'stopped' }}"
                    enabled: "{{ true if disable == false else false }}"
                - name: Configure Apache
                  template:
                    src: "{{ 'httpd.conf' if apacheconf == 'default' else apacheconf }}"
                    dest: /etc/httpd/conf/httpd.conf
                    mode: '0644'
                    owner: root
                    group: root
              when: ansible_distribution in ["CentOS", "RedHat"]


        [FINAL ANSIBLE PLAYBOOK YAML]
        - name: Apache
          hosts: all
          become: yes
          vars:
            disable: false
            apacheconf: default
          tasks:
            - name: Install and start Apache
              block:
                - name: Install Apache
                  yum:
                    name: httpd
                    state: "{{ 'present' if disable == false else 'absent' }}"
                - name: Enable and start Apache
                  service:
                    name: httpd
                    state: "{{ 'running' if disable == false else 'stopped' }}"
                    enabled: "{{ true if disable == false else false }}"
                - name: Configure Apache
                  template:
                    src: "{{ 'httpd.conf' if apacheconf == 'default' else apacheconf }}"
                    dest: /etc/httpd/conf/httpd.conf
                    mode: '0644'
                    owner: root
                    group: root
              when: ansible_distribution in ["CentOS", "RedHat"]


        [FINAL OUTPUT YAML]
        - name: Apache
          hosts: all
          become: yes
          vars:
            disable: false
            apacheconf: default
          tasks:
            - name: Install and start Apache
              block:
                - name: Install Apache
                  yum:
                    name: httpd
                    state: "{{ 'present' if disable == false else 'absent' }}"
                - name: Enable and start Apache
                  service:
                    name: httpd
                    state: "{{ 'running' if disable == false else 'stopped' }}"
                    enabled: "{{ true if disable == false else false }}"
                - name: Configure Apache
                  template:
                    src: